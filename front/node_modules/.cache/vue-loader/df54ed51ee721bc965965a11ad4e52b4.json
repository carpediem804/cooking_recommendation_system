{"remainingRequest":"C:\\Users\\Daehyun\\Desktop\\sex\\team_project\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Daehyun\\Desktop\\sex\\team_project\\front\\src\\views\\addProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Daehyun\\Desktop\\sex\\team_project\\front\\src\\views\\addProfile.vue","mtime":1544630785166},{"path":"C:\\Users\\Daehyun\\Desktop\\sex\\team_project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1544630775208},{"path":"C:\\Users\\Daehyun\\Desktop\\sex\\team_project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544630775545},{"path":"C:\\Users\\Daehyun\\Desktop\\sex\\team_project\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1544630784402}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport firebase from 'firebase'\r\nimport BField from \"buefy/src/components/field/Field\";\r\nimport BFieldBody from \"buefy/src/components/field/FieldBody\";\r\nimport BInput from \"buefy/src/components/input/Input\";\r\nimport axios from 'axios'\r\nimport BUpload from \"buefy/src/components/upload/Upload\";\r\n\r\nexport default{\r\n    name:'addProfile',\r\n    methods:{\r\n        addInfo:function(){\r\n            let user=this.$store.state.user\r\n            var db=firebase.firestore();\r\n\r\n            if(user===null)//로그인 상태가 아니면\r\n            {\r\n              alert('로그인ㄱㄱ')\r\n            }\r\n            else\r\n            {\r\n                db.collection('users').doc(user.email).update({\r\n                nickName:document.getElementById('nickName').value,\r\n            })\r\n            }\r\n\r\n            axios.defaults.headers.post['Content-Type'] = 'multipart/form-data';\r\n            let formData = new FormData();\r\n            formData.append('file', this.file);\r\n            axios.post('http://localhost:8000/upload/userimg', formData,{\r\n                params: {\r\n                        uid : this.$store.state.user.uid\r\n                }}).then((res)=>{\r\n                if(res.data)\r\n                {\r\n\r\n                }\r\n                else\r\n                {\r\n\r\n                }\r\n            });\r\n\r\n        },\r\n        upload(name, files) {\r\n\r\n            axios.defaults.headers.post['Content-Type'] = 'multipart/form-data';\r\n\r\n            //  const formData = new FormData();\r\n            //   formData.append(name, files[0], files[0].name);\r\n            this.createImage(files[0]);\r\n            console.log(files)\r\n            this.file = files[0]\r\n            let formData = new FormData()\r\n            formData.append('file', this.file)\r\n            this.imageUp=true\r\n\r\n        },\r\n        createImage(file) {\r\n            var image = new Image();\r\n            var reader = new FileReader();\r\n            var vm = this;\r\n\r\n            reader.onload = (e) => {\r\n                vm.imgFile = e.target.result;\r\n            };\r\n            reader.readAsDataURL(file);\r\n        },\r\n        test(){\r\n\r\n        }\r\n        /*db에서 읽는법\r\n        readDb:function(){\r\n        var db=firebase.firestore();\r\n        db.collection('users').doc('1').get().then((doc)=>{\r\n          console.log(doc.data().name)\r\n        })\r\n      }*/\r\n    },\r\n    data(){\r\n        return{\r\n            nickName:'',\r\n            sex:'',\r\n            dropFiles:null,\r\n            imageUp:false\r\n        }\r\n    },\r\n    components:{\r\n        BUpload,\r\n        BInput,\r\n        BFieldBody,\r\n        BField,\r\n        firebase\r\n    },\r\n    mounted(){\r\n        (function(){\r\n           let user=firebase.auth().currentUser;\r\n           if(user==null)\r\n           {\r\n               alert(\"로그인부터 ㄱㄱ\")\r\n               window.location.href=\"/\"\r\n           }\r\n        })()\r\n    },\r\n}\r\n",{"version":3,"sources":["addProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addProfile.vue","sourceRoot":"src\\views","sourcesContent":["<template>\r\n    <div id=\"addProfile\" class=\"modal-card\" style=\"width:300px\">\r\n        <div class=\"modal-card-head\">\r\n            <p>프로필 변경</p>\r\n        </div>\r\n        <section class=\"modal-card-body\" >\r\n            <b-field>\r\n                <div class=\"dropbox\">\r\n                    <input class=\"input-file\" type=\"file\" name=\"file\"\r\n                           @change=\"upload($event.target.name, $event.target.files)\"\r\n                           @drop=\"upload($event.target.name, $event.target.files)\">\r\n                    <div class=\"content has-text-centered\" v-if=\"!imageUp\">\r\n                        <i class=\"fas fa-image fa-3x\"></i>\r\n                    </div>\r\n                    <div v-else>\r\n                        <img :src=\"imgFile\" />\r\n                    </div>\r\n                </div>\r\n\r\n            </b-field>\r\n            <div v-if=\"dropFiles\">\r\n                <span class=\"file-name\">\r\n                    {{ dropFiles.name }}\r\n                </span>\r\n            </div>\r\n            <b-field>\r\n                <b-input type=\"text\" placeholder=\"닉네임\" vmodel=\"nickName\" id=\"nickName\"></b-input>\r\n            </b-field>\r\n            <b-field>\r\n                <button class=\"button\" value=\"수정\" v-on:click=\"addInfo()\">수정</button>\r\n            </b-field>\r\n            <b-field>\r\n                <button class=\"button\" value=\"테스트\" @click=\"test()\">테스트</button>\r\n            </b-field>\r\n        </section>\r\n\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport firebase from 'firebase'\r\nimport BField from \"buefy/src/components/field/Field\";\r\nimport BFieldBody from \"buefy/src/components/field/FieldBody\";\r\nimport BInput from \"buefy/src/components/input/Input\";\r\nimport axios from 'axios'\r\nimport BUpload from \"buefy/src/components/upload/Upload\";\r\n\r\nexport default{\r\n    name:'addProfile',\r\n    methods:{\r\n        addInfo:function(){\r\n            let user=this.$store.state.user\r\n            var db=firebase.firestore();\r\n\r\n            if(user===null)//로그인 상태가 아니면\r\n            {\r\n              alert('로그인ㄱㄱ')\r\n            }\r\n            else\r\n            {\r\n                db.collection('users').doc(user.email).update({\r\n                nickName:document.getElementById('nickName').value,\r\n            })\r\n            }\r\n\r\n            axios.defaults.headers.post['Content-Type'] = 'multipart/form-data';\r\n            let formData = new FormData();\r\n            formData.append('file', this.file);\r\n            axios.post('http://localhost:8000/upload/userimg', formData,{\r\n                params: {\r\n                        uid : this.$store.state.user.uid\r\n                }}).then((res)=>{\r\n                if(res.data)\r\n                {\r\n\r\n                }\r\n                else\r\n                {\r\n\r\n                }\r\n            });\r\n\r\n        },\r\n        upload(name, files) {\r\n\r\n            axios.defaults.headers.post['Content-Type'] = 'multipart/form-data';\r\n\r\n            //  const formData = new FormData();\r\n            //   formData.append(name, files[0], files[0].name);\r\n            this.createImage(files[0]);\r\n            console.log(files)\r\n            this.file = files[0]\r\n            let formData = new FormData()\r\n            formData.append('file', this.file)\r\n            this.imageUp=true\r\n\r\n        },\r\n        createImage(file) {\r\n            var image = new Image();\r\n            var reader = new FileReader();\r\n            var vm = this;\r\n\r\n            reader.onload = (e) => {\r\n                vm.imgFile = e.target.result;\r\n            };\r\n            reader.readAsDataURL(file);\r\n        },\r\n        test(){\r\n\r\n        }\r\n        /*db에서 읽는법\r\n        readDb:function(){\r\n        var db=firebase.firestore();\r\n        db.collection('users').doc('1').get().then((doc)=>{\r\n          console.log(doc.data().name)\r\n        })\r\n      }*/\r\n    },\r\n    data(){\r\n        return{\r\n            nickName:'',\r\n            sex:'',\r\n            dropFiles:null,\r\n            imageUp:false\r\n        }\r\n    },\r\n    components:{\r\n        BUpload,\r\n        BInput,\r\n        BFieldBody,\r\n        BField,\r\n        firebase\r\n    },\r\n    mounted(){\r\n        (function(){\r\n           let user=firebase.auth().currentUser;\r\n           if(user==null)\r\n           {\r\n               alert(\"로그인부터 ㄱㄱ\")\r\n               window.location.href=\"/\"\r\n           }\r\n        })()\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n    .dropbox {\r\n        outline: 2px dashed #aaa;\r\n        background: #7fb4dd;\r\n        width: 100px;\r\n        height: 100px;\r\n        position: relative;\r\n        margin: 0 auto;\r\n    }\r\n    .input-file{\r\n        position: absolute;\r\n        opacity: 0;\r\n        width:100%;\r\n        height:100%;\r\n        top:0;\r\n        left:0;\r\n        z-index: 3;\r\n    }\r\n</style>\r\n"]}]}